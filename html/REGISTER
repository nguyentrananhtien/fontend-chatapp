// URL WebSocket server
const WS_URL = "wss://chat.longapp.site/chat/chat";

// Tạo kết nối WebSocket
const ws = new WebSocket(WS_URL);

// Khi kết nối mở
ws.onopen = () => {
  console.log("Đã kết nối tới server");

  // Payload REGISTER theo tài liệu
  const registerPayload = {
    action: "onchat",
    data: {
      event: "REGISTER",
      data: {
        user: "long",
        pass: "12345"
      }
    }
  };

  // Gửi dữ liệu đăng ký
  ws.send(JSON.stringify(registerPayload));
  console.log("Đã gửi yêu cầu REGISTER");
};

// Lắng nghe tin nhắn từ server
ws.onmessage = (event) => {
  console.log("Nhận từ server:", event.data);
};

// Xử lý lỗi
ws.onerror = (error) => {
  console.error("Lỗi:", error);
};

// Khi đóng kết nối
ws.onclose = () => {
  console.log("Kết nối đã đóng");
};
